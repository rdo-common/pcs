From cc373126c53282ff2f266e9f243c5798fca98d37 Mon Sep 17 00:00:00 2001
From: Tomas Jelinek <tojeline@redhat.com>
Date: Thu, 10 Sep 2015 17:19:00 +0200
Subject: [PATCH] Make "port" parameter of fence agents optional

---
 pcs/test/test_stonith.py | 12 ++++++++----
 pcs/utils.py             | 18 ++++++++++--------
 2 files changed, 18 insertions(+), 12 deletions(-)

diff --git a/pcs/utils.py b/pcs/utils.py
index 757c159..0b8d03f 100644
--- a/pcs/utils.py
+++ b/pcs/utils.py
@@ -1791,14 +1791,16 @@ def validInstanceAttributes(res_id, ra_values, resource_type):
 
     if missing_required_parameters:
         if resClass == "stonith" and "port" in missing_required_parameters:
-            if (
-                "pcmk_host_argument" in ra_values
-                or
-                "pcmk_host_map" in ra_values
-                or
-                "pcmk_host_list" in ra_values
-            ):
-                missing_required_parameters.remove("port")
+            # Temporarily make "port" an optional parameter. Once we are
+            # getting metadata from pacemaker, this will be reviewed and fixed.
+            #if (
+            #    "pcmk_host_argument" in ra_values
+            #    or
+            #    "pcmk_host_map" in ra_values
+            #    or
+            #    "pcmk_host_list" in ra_values
+            #):
+            missing_required_parameters.remove("port")
 
     return bad_parameters, missing_required_parameters 
 
-- 
1.9.1

