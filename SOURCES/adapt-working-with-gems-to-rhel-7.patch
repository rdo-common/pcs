From 8d958e9f63698bd05b19213ddbf71b57cb228135 Mon Sep 17 00:00:00 2001
From: Ivan Devat <idevat@redhat.com>
Date: Tue, 24 May 2016 07:26:15 +0200
Subject: [PATCH 3/5] adapt working with gems to rhel 7

---
 pcsd/Gemfile      | 1 -
 pcsd/Gemfile.lock | 2 --
 pcsd/Makefile     | 5 +----
 3 files changed, 1 insertion(+), 7 deletions(-)

diff --git a/pcsd/Gemfile b/pcsd/Gemfile
index 6418fd41..3598f533 100644
--- a/pcsd/Gemfile
+++ b/pcsd/Gemfile
@@ -8,7 +8,6 @@ gem 'tilt'
 gem 'rack-test'
 gem 'backports'
 gem 'rpam-ruby19'
-gem 'json'
 gem 'multi_json'
 gem 'open4'
 gem 'ffi'
diff --git a/pcsd/Gemfile.lock b/pcsd/Gemfile.lock
index 4b78bba6..137086ca 100644
--- a/pcsd/Gemfile.lock
+++ b/pcsd/Gemfile.lock
@@ -4,7 +4,6 @@ GEM
     backports (3.11.3)
     ethon (0.11.0)
     ffi (1.9.25)
-    json (2.1.0)
     multi_json (1.13.1)
     open4 (1.3.4)
     rack (1.6.10)
@@ -33,7 +32,6 @@ DEPENDENCIES
   backports
   ethon
   ffi
-  json
   multi_json
   open4
   rack
diff --git a/pcsd/Makefile b/pcsd/Makefile
index 21550c5a..642d0c83 100644
--- a/pcsd/Makefile
+++ b/pcsd/Makefile
@@ -1,7 +1,7 @@
 FFI_VERSION="1.9.25"
 FFI_C_DIR=vendor/bundle/ruby/gems/ffi-${FFI_VERSION}/ext/ffi_c
 
-build_gems: get_gems
+build_gems:
 	bundle install --local --deployment
 	#ffi makes symlink with absolute path. Let's change it to relative path.
 	for fname in `ls ${FFI_C_DIR}/libffi-*/include/ffitarget.h`; do \
@@ -30,8 +30,5 @@ build_gems_without_bundler:
 	vendor/cache/tilt-2.0.8.gem \
 	-- '--with-ldflags="-Wl,-z,now -Wl,-z,relro"'
 
-get_gems:
-	bundle package
-
 clean:
 	rm -rfv vendor/
-- 
2.13.6

